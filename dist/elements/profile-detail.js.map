{"version":3,"file":"profile-detail.js","sourceRoot":"","sources":["../../src/elements/profile-detail.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAC/D,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AACnD,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC7C,OAAO,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AAGvD,OAAO,EAAE,oBAAoB,EAAE,MAAM,YAAY,CAAC;AAElD,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AACrD,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AAGpC;;GAEG;AACH,MAAM,OAAO,aAAc,SAAQ,mBAAmB,CAAC,UAAU,CAAC;IAAlE;QACE,wBAAwB;;QAkBxB,yBAAyB;QAEjB,sBAAiB,GAAG,IAAI,cAAc,CAC5C,IAAI,EACJ,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,EACpD,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CACrC,CAAC;IAkGJ,CAAC;IAhGC,mBAAmB;QACjB,MAAM,MAAM,GAA2B,EAAE,CAAC;QAE1C,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CACvC,IAAI,CAAC,iBAAiB,CAAC,KAAM,CAAC,MAAM,CACrC,EAAE;YACD,IAAI,GAAG,KAAK,QAAQ,EAAE;gBACpB,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;aACrB;SACF;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,qBAAqB,CAAC,OAAe,EAAE,UAAkB;QACvD,OAAO,IAAI,CAAA;;sDAEuC,OAAO;gBAC7C,UAAU;;KAErB,CAAC;IACJ,CAAC;IAED,aAAa,CAAC,OAA4B;QACxC,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAA;;;;;aAKJ,GAAG,CAAC,yCAAyC,CAAC;;aAE9C,CAAC;QAEV,OAAO,IAAI,CAAA;;;uCAGwB,IAAI,CAAC,WAAW;;eAExC,OAAO,CAAC,QAAQ;;;;;;;;UAQrB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE,CAChE,IAAI,CAAC,qBAAqB,CAAC,GAAG,EAAE,KAAK,CAAC,CACvC;;KAEJ,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACnC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAA;;;;;;;;;;;;;;;YAeb,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,gBAAgB,CAAC,GAAG,CACtC,GAAG,EAAE,CAAC,IAAI,CAAA;;;;;aAKT,CACF;;OAEJ;YACD,QAAQ,EAAE,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;SACjD,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,MAAM,KAAK,cAAc;QACvB,OAAO;YACL,cAAc,EAAE,WAAW;YAC3B,aAAa,EAAE,UAAU;SAC1B,CAAC;IACJ,CAAC;;AAEM,oBAAM,GAAG,CAAC,YAAY,CAAC,CAAC;AAnH/B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;kDACD;AAU1B;IAFC,eAAe,CAAC,EAAE,OAAO,EAAE,oBAAoB,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;IACnE,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;4CACL","sourcesContent":["import { contextProvided } from '@lit-labs/context';\nimport { ScopedElementsMixin } from '@open-wc/scoped-elements';\nimport { html, LitElement } from 'lit';\nimport { TaskSubscriber } from 'lit-svelte-stores';\nimport { property } from 'lit/decorators.js';\nimport { SlSkeleton } from '@scoped-elements/shoelace';\nimport { AgentPubKey } from '@holochain/client';\n\nimport { profilesStoreContext } from '../context';\nimport { ProfilesStore } from '../profiles-store';\nimport { sharedStyles } from './utils/shared-styles';\nimport { AgentAvatar } from './agent-avatar';\nimport { msg } from '@lit/localize';\nimport { Profile } from '../types';\n\n/**\n * @element profile-detail\n */\nexport class ProfileDetail extends ScopedElementsMixin(LitElement) {\n  /** Public properties */\n\n  /**\n   * REQUIRED. Public key identifying the agent for which the profile should be shown\n   */\n  @property({ type: Object })\n  agentPubKey!: AgentPubKey;\n\n  /** Dependencies */\n\n  /**\n   * `ProfilesStore` that is requested via context.\n   * Only set this property if you want to override the store requested via context.\n   */\n  @contextProvided({ context: profilesStoreContext, subscribe: true })\n  @property({ type: Object })\n  store!: ProfilesStore;\n\n  /** Private properties */\n\n  private _agentProfileTask = new TaskSubscriber(\n    this,\n    () => this.store.fetchAgentProfile(this.agentPubKey),\n    () => [this.store, this.agentPubKey]\n  );\n\n  getAdditionalFields(): Record<string, string> {\n    const fields: Record<string, string> = {};\n\n    for (const [key, value] of Object.entries(\n      this._agentProfileTask.value!.fields\n    )) {\n      if (key !== 'avatar') {\n        fields[key] = value;\n      }\n    }\n\n    return fields;\n  }\n\n  renderAdditionalField(fieldId: string, fieldValue: string) {\n    return html`\n      <div class=\"row\" style=\"margin-top: 16px\">\n        <span style=\"margin-right: 16px; \"> <strong>${fieldId}</strong></span>\n        <span>${fieldValue}</span>\n      </div>\n    `;\n  }\n\n  renderProfile(profile: Profile | undefined) {\n    if (!profile)\n      return html`<div\n        class=\"column\"\n        style=\"align-items: center; justify-content: center; flex: 1;\"\n      >\n        <span class=\"placeholder\"\n          >${msg(\"This agent hasn't created a profile yet\")}</span\n        >\n      </div>`;\n\n    return html`\n      <div class=\"column\">\n        <div class=\"row\" style=\"align-items: center\">\n          <agent-avatar .agentPubKey=${this.agentPubKey}></agent-avatar>\n          <span style=\"font-size: 16px; margin-left: 8px;\"\n            >${profile.nickname}</span\n          >\n\n          <span style=\"flex: 1\"></span>\n\n          <slot name=\"action\"></slot>\n        </div>\n\n        ${Object.entries(this.getAdditionalFields()).map(([key, value]) =>\n          this.renderAdditionalField(key, value)\n        )}\n      </div>\n    `;\n  }\n\n  render() {\n    return this._agentProfileTask.render({\n      pending: () => html`\n        <div class=\"column\">\n          <div class=\"row\" style=\"align-items: center\">\n            <sl-skeleton\n              effect=\"pulse\"\n              style=\"height: 32px; width: 32px; border-radius: 50%;\"\n            ></sl-skeleton>\n            <div>\n              <sl-skeleton\n                effect=\"pulse\"\n                style=\"width: 122px; margin-left: 8px;\"\n              ></sl-skeleton>\n            </div>\n          </div>\n\n          ${this.store.config.additionalFields.map(\n            () => html`\n              <sl-skeleton\n                effect=\"pulse\"\n                style=\"width: 200px; margin-top: 16px;\"\n              ></sl-skeleton>\n            `\n          )}\n        </div>\n      `,\n      complete: profile => this.renderProfile(profile),\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  static get scopedElements() {\n    return {\n      'agent-avatar': AgentAvatar,\n      'sl-skeleton': SlSkeleton,\n    };\n  }\n\n  static styles = [sharedStyles];\n}\n"]}